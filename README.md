# 공 상대 쪽으로 넘기는 모션 구현
이를 위해,
## 1. I2C 통신 수정 필요
### 1) 개략적인 schematic

    +-----------------------------+             +-----------------------------+
    |        Board1 (왼쪽)        |             |        Board2 (오른쪽)        |
    |                             |             |                             |
    |  +-----------------------+  |             |  +-----------------------+  |
    |  |      I2C_Intf         |  |             |  |      I2C_Intf         |  |
    |  |  +-----------------+  |  |             |  |  +-----------------+  |  |
    |  |  |   I2C Master     |<--------------------->|   I2C Slave     |  |  |
    |  |  +-----------------+  |  |             |  |  +-----------------+  |  |
    |  |                       |  |             |  |                       |  |
    |  |  +-----------------+  |  |             |  |  +-----------------+  |  |
    |  |  |   I2C Slave      |<--------------------->|   I2C Master     |  |  |
    |  |  +-----------------+  |  |             |  |  +-----------------+  |  |
    |  +-----------------------+  |             |  +-----------------------+  |
    +-----------------------------+             +-----------------------------+


I2C 채택 이유 : SPI는 양방향 통신이라 unpredictable한 모션 생길 가능성.. 애초에 차단하기

### 2) I2C intf 만들기

 - I2C Intf는 양 보드 간 I2C 통신을 제어하는 역할을 수행할 것.
 - 받을 때는 받고, 보낼 때는 보내기만 하는 제어 로직 필요 (FSM  설계)
    - Master가 활성화 되었을 때는 Slave는 비활성화 되어야함. 
    - 한 쪽 보드의 Master 가 활성화 되었을 때 반대 쪽 보드의 Master는 비활성화 되어야 함

  [자세한 설계 내용은 여기에](./I2C/I2C_Interface.md)



## 2. ball 모션 수정 필요
- 2개의 모션이 필요
    - 1) 왼쪽 보드의 경우 : 오른쪽으로 점차 사라지는 모션 필요
    - 2) 오른쪽 보드의 경우 : 왼쪽으로 점차 사라지는 모션 필요
    
    위 모션의 구현이 완료 되었을 경우,
    1) 공이 사라지는 속도 구현
    2) 공의 기존 운동을 유지하는 모션 구현

----
현재 까지 완료된 내용: I2C Intf 왼쪽 보드 -> 오른쪽 보드로 공의 속도, 공의 좌표 값 전송하는 것 까지 완료

@jhyang1203 @allowseok 확인할 내용
### 해야 할 것: 왼쪽으로 부터 받은 공의 정보를 이용해 오른쪽 모니터 화면 표시하기
일단 일차적인 목표는 [I2C_Slave](./I2C/SLAVE/I2C_Slave.sv) 에서 볼 수 있듯이 왼쪽으로 받은 공의 정보를 활용하여  
공의 운동이 이어지도록 하는 것 

  그러니까 전체적으로 왼쪽 ---> 오른쪽 으로 움직이는것만 확인하는 것

- Slave Register 정보 (싹다 8bit register)
  - slv_reg0: {공의 y 좌표 [9:8],6'b0} 
  - slv_reg1: 공의 y 좌표 [7:0]
  - slv_reg2: 공의 y 방향으로의 속도 

(참고로 현재 로직의 경우 오른쪽 벽에 부딪힐 경우 공이 멈추도록 하였으므로 넘겨받는 공의 속도도 항상 0일 거임)

이 3가지 정보를 이용해서 일단 공이 이어지면서 움직이게 해주어야함

이를 위해, 왼쪽 모니터에서 공이 오른쪽 경계에 부딪혔을 때,

1. 공이 왼쪽 화면에서 점차 사라지는 로직 필요
2. 공이 오른쪽 화면에서 점차 나타나는 로직 필요
3. 넘겨 받은 공의 좌표와 속도를 이용해 이어서 운동하는 로직 필요

그 외 공통되는 것들은 그냥 갖다쓰면 될 것 같음

아무튼 I2C 통신이 내부적으로 어떻게 이루어지는지는 아예 몰라도 되고, 그냥 [I2C_Slave](./I2C/SLAVE/I2C_Slave.sv)에 있는 slv_reg0, slv_reg1, slv_reg2 만 이용하면 됨


### 마스터, 슬레이브파일
**code**
- 마스터(왼쪽 모니터 용)
마스터 코드는 밖에 나와있는 (아무 폴더에도 포함되지 않은 상위 파일들) 코드 전부 + I2C 폴더에 있는 4개파일임

- 슬레이브 (오른쪽 모니터 용)
슬레이브 코드는 I2C 폴더/SLAVE 폴더로 들어가면 있는 4개 파일임

**constaint파일**
[Master Constraint 파일](./Basys-3-Master.xdc)은 이거고, [Slave Constraint 파일](./I2C/SLAVE/slave.xdc) 은 이거임
